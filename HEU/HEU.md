# HEU （同态加密单元）
相比于SPU，个人认为HEU相关的内容的数学要求更高，会更偏向于这一方面的内容。现在Secretflow框架的HEU好像还只支持PHEU。而且在前期的学习当中，感觉在操作中使用到该内容的频率不是很高，之前本人也随着兴趣学了一些和同态加密相关的数学方面的内容，在下文会有一定的展开。
## 场景
个人认为不是所有的场景都需要该内容，像是PSI的内容，对这方面的要求不会特别高。同态加密要求的是将一批数据加密，明文之间的算法可以通过密文之间相应的运算得到, 例如
$$S(a1) * S(a2) = S(a1 + a2)$$
$$S(a1) ^ {S(a2)} = S(a1 * a2)$$
由于PSI这类问题对于运算的要求并不高，对于这一方面的需求应该也不会很高。
主要的场景可能还是在FL等领域，需要进行加密高性能运算的场景
## 难点
HE需要保证加密之后数据的可用性（可以进行逻辑和算法上的操作）以及精度损失不能太大（像是2 * 3 = 5.99 这一类可能相对可以接受），且加密的程度较高，以及加解密的效率不能太低。现阶段的各类算法应该还无法完全实现几个目的都达到很高的水平。
## 思路
基本上想使用的是Paillier的同态加密算法，主要尝试的是ElGamel的离散对数的方法去加密

### 离散对数方法
本人的一个粗略的看法，对于数据$[x_1, x_2, x_3, ..., x_n]$
选择一个质数 $p$ 和整数 $g$ ，对于$x_i$， 有$y_i = g^{x_i} \text{ mod }p$，形成$[y_1, y_2, y_3, ..., y_n]$

* 若该组数据作为输入数据，配合其他的未加密数据去训练一个模型，假设模型为$M$, $m_i = M(x_i)$。而现在对于数据 $x_i$ 进行了加密，现在的模型为 $M'$ $m_i = M'(y_i)$ 
* 若该组数据为输出数据，需要有其他的数据（无论加密未加密）去训练一个模型，假设还是模型$M$, 现在是 $x_i = M(\_)$, 而加密后 $y_i = M'(\_)$， 这里可以假设加密算法为 $H$, $H(x_i) = y_i$ 则可以认为$M'(x_i) = H(M(x_i))$，即训练以后的结果需要进一步的解密才能得到需要的结果


